# 一期开发任务--细节汇总.md

任务清单：
 1. 完成git、submodule的搭建，申请容器，申请新项目—郑韬

    1.1 QPS统计按照 语音助手+PC问财+手机问财 三个渠道的qps来计算。



 2. 完成pipeline的建立，实现，拉取submodule代码，功能点： ---郑韬

     2.1 能够根据submodule的配置文件，拉去对应的项目代码，将其打包好的 html文件，js、css资源，上传至项目中的 smallflow目录下。

     2.2 html重命名，根据内容，进行MD5编码，生成不重复的html文件。EX: abd3e.html

     2.3 打包部分的逻辑 是通过 pipeline执行指定命令的脚本，还是 直接打好包的内容 需要确认一下。

     2.4 需要支持只打部分项目，而不是所有项目（避免总是更新全部的项目）



3.  运营平台的小流量配置文件，打通 容器、网关。赤兔的容器中，都能读到同一份配置文件—张心应

    3.1 更新的情况下如何处理？  多久更新一次？

    3.2 前端的java网关需要支持 快速实验，对比试验， 灰度发布 3个流量分配的功能。 快速实验和对比试验 的流程分配 在 灰度发布后面。 如果查询到有 快速实验或对比试验；需要对灰度发布的量做提前的切割，要保障 快速实验和对比试验能顺利进行。



4.  在60配置Nginx配置，将接入的项目地址，转发到容器中对应的 smallflow目录下（这一步线上最后操作）。--- 张好洁、周俊杰

     4.1  第一期上线一个配置一个即可。



5.  在容器中实现一套java的网关服务，根据配置文件映射至对应的 html静态文件下。 — 张心应。

   5.1 流量分配需要遵循互斥原则， 每个项目的试验组 互相独立。

   5.2 重新分配流量时，需要从 多的（主版本）上进行拿取，避免出现 部分用户 一会儿这个版本、一会儿那个版本的情况。

   5.3 reload 的时候，不变的项目和试验，已经分配好的用户 流量不能变动，不能一更新  1号用户就从 A版本 跑到B版本这种情况的出现。

   5.4 灰度发布机制实现。