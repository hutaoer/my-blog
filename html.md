# html 知识点

### DOCTYPE
* <!DOCTYPE>声明位于 HTML 文档中的第一行，处于 <html> 标签之前。告知浏览器的 解析器用什么文档标准解析这个文档。
* HTML5 不基于 SGML，不需要声明 DTD
* SGML：Standard Generalized Markup Language 标准通用标记语言
* 在 html5 之后不再需要指定 DTD 文档，因为 html5 以前的 html 文档都是基于 SGML 的，所以需要通过指定 DTD 来定义文
* html5 的声明：写 <!DOCTYPE HTML>
* DTD（ Document Type Definition 文档类型定义）在标准模式下，浏览器的解析规则都是按照最新的标准进行解析的。而在兼容模式下，浏 览器会以向后兼容的方式来模拟老式浏览器的行为，以保证一些老的网站的正确访问。

### SGML 、 HTML 、XML 和 XHTML 的区别
* SGML 是标准通用标记语言
* HTML 是超文本标记语言
* XML 是可扩展标记语言
* XHTML 比HTML 更严格，比如标签必须都用小写，标签都 必须有闭合标签等。

## 浏览器

### 内核
* 主要分成两部分：渲染引擎和 JS 引擎。
* 渲染引擎的职责就是渲染，即在浏览器窗口中显示所请求的内容。默认情况下，渲染引 擎可以显示 html、xml 文档及图片。
* JS 引擎：解析和执行 javascript 来实现网页的动态效果。
* 分类：
  - Trident（微软）
  - Gecko（Firefox）
  - Webkit (Safari)
  - Blink(Chrome)，Webkit的分支

### 浏览器渲染原理
* 解析HTML文档，跟进文档定义生成DOM树
* 对CSS解析，生成CSSOM 规则树
* 根据DOM、CSSOM 构建渲染树，不可见的DOM不会放进渲染树。树的节点被称为渲染对象。
* 当渲染对象被创建并添加到树中，它们并没有位置和大小，所以当浏览器生成渲染树以后，就会根据渲染树来进行布局（也可以叫做 回流）。这一阶段浏览器要做的事情是要弄清楚各个节点在页面中的确切位置和大小。通常这一行为也被称为“自动重排”。
* 布局阶段结束后是绘制阶段，遍历渲染树并调用渲染对象的 `paint` 方法将它们的内容显示在屏幕上，绘制使用 UI 基础组件。值得注意的是，这个过程是逐步完成的，为了更好的用户体验，渲染引擎将会尽可能早的将内容呈现到屏幕上，并不会等到所有的 html 都解析完成之后再去构建和布局 render 树。它是解析完一部分内容就显示一部分内容，同 时，可能还在通过网络下载其余内容。

### script标签
* 渲染过程中，如果碰到 script 标签。JavaScript 的加载、解析与执行会阻塞文档的解析。在构建 DOM 时，HTML 解析器若遇到了 JavaScript，那么它会暂停文档的解析，将控制权移交给 JavaScript 引擎， 等 JavaScript 引擎运行完毕，浏览器再从中断的地方恢复继续解析文档。因此，一般要求JS放到body底部。
* defer 属性表示延迟执行引入的 JavaScript，即这段 JavaScript 加载时 HTML 并 未停止解析，这两个过程是并行的。当整个 document 解析完毕后再执行脚本文件，在 DOMContentLoaded 事件触发之前 完成。【多个脚本按顺序执行】。
* async 属性表示异步执行引入的 JavaScript，与 defer 的区别在于，如果已经加 载好，就会开始执行，也就是说【它的执行仍然会阻塞文档的解析，只是它的加载过程不会阻塞】。【多个脚本的执行顺序无法保证】。

### 回流与重绘
* 重绘: 当渲染树中的一些元素需要更新属性，而这些属性只是影响元素的外观、风格，而 不会影响布局的操作，比如 background color，我们将这样的操作称为重绘。 
* 回流：当渲染树中的一部分（或全部）因为元素的规模尺寸、布局、隐藏等改变而需要重 新构建的操作，会影响到布局的操作，这样的操作我们称为回流。
* 回流必定会发生重绘，重绘不一定会引发回流。
* 常见引起回流属性和方法： 任何会改变元素几何信息（元素的位置和尺寸大小）的操作，都会触发回流。 
 -（1）添加或者删除可见的 DOM 元素； 
 -（2）元素尺寸改变——边距、填充、边框、宽度和高度 
 -（3）内容变化，比如用户在 input 框中输入文字 （4）浏览器窗口尺寸改变——resize 事件发生时 （5）计算 offsetWidth 和 offsetHeight 属性 （6）设置 style 属性的值 （7）当你修改网页的默认字体时。

### 减少回流方法
*（1）使用 transform 替代 绝对定位的位移
*（2）不要把节点的属性值放在一个循环里当成循环里的变量 
*（3）不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局 
*（4）把 DOM 离线后修改。如：使用 documentFragment 对象在内存里操作 DOM 
*（5）不要一条一条地修改 `DOM` 的样式。与其这样，还不如预先定义好 `css` 的 `class`， 然后修改 `DOM` 的 `className`。修改样式的时候，通过class来控制。

### 如何理解html语义化
* 我们应该使用合适的标签来划分网页内容的结构。
* 比如导航，nav，文章，article。header、nav、section; 
* 更加利于seo和代码阅读。

### b 与 strong 的区别和 i 与 em 的区别？
* <b> <i> 是自然样式标签，分别表示无意义的加粗，无意义的斜体
* 而 <em> 和 <strong> 是语义样式标签。 <em> 表示一般的强调文本，而 <strong> 表 示比 <em> 语义更强的强调文本。
* 使用阅读设备阅读网页时：<strong> 会重读，而 <b> 是展示强调内容。

### SEO 注意问题
* 合理的 title、description、keywords：搜索对着三项的权重逐个减小
* 重要内容不要用 js 输出：爬虫不会执行 js 获取内容 
* 少用 iframe：搜索引擎不会抓取 iframe 中的内容 
* 非装饰性图片必须加 alt 

### cookies，sessionStorage 和 localStorage
* cookie 数据大小不能超过 4 k，cookie 数据始终在同源（协议、主机、端口相同）的 http 请求中携带
* localStorage 存储持久数据，浏览器关闭后数据不丢失除非主动删除数据。5M存储大小。
* sessionStorage 数据在页面会话结束时会被清除。5M
* 作用域：sessionStorage 只在同源的同窗口（或标签页）中共享数据，localStorage 在所有同源窗口中都是共享的。 cookie 在所有同源窗口中都是共享的。

### visibilitychange 事件
* 当 visibleStateState 属性的值转换为 hidden 时，Safari不会按预期触发visibilitychange； 因此，在这种情况下，您还需要包含代码以侦听 pagehide 事件。
* 出于兼容性原因，请确保使用  document.addEventListener 而不是window.addEventListener来注册回调。
* （1）对服务器的轮询 （2）网页动画 （3）正在播放的音频或视频 

### <img> 的 title 和 alt 有什么区别？
* title 通常当鼠标滑动到元素上的时候显示
* alt 是 <img> 的特有属性，是图片内容的等价描述，用于图片无法加载时显示、读屏器阅 读图片。可提图片高可访问性。搜索引擎爬取。

### canvas svg 区别
* Canvas是使用JavaScript程序绘图(动态生成)，SVG是使用XML文档描述来绘图。
* canvas适合像素处理，动态渲染和大数据量绘制
* SVG功能更完善，适合静态图片展示，高保真文档查看和打印的应用场景

### Normalize.css reset.css
#### normalize.css
* Normalize.css是一种CSS reset的替代方案。
* 保护有用的浏览器默认样式而不是完全去掉它们
* 一般化的样式：为大部分HTML元素提供
* 修复浏览器自身的bug并保证各浏览器的一致性

#### reset.css
* css reset 是最早的一种解决浏览器间样式不兼容问题的方案，它的基本思想是将浏览器的所有样式都重置掉，从而达到所有浏览器样式保持一致的效果。但是使用这种方法，可能会 带来一些性能上的问题，并且对于一些元素的不必要的样式的重置，其实反而会造成画蛇添 足的效果。

### protocol-relative URL
* 协议相对 URL，无论你是使用HTTPS，还是HTTP访问页面，浏览器都会以与你相同的协议请求页面中的资源.

### PC端微信扫码二维码登录过程
* 浏览器获得一个临时 id，通过长连接等待客户端扫描带有此 id 的二维码后，从长连接中获得客户端上报给 server 的帐号信息进行展示。 并在客户端点击确认后，获得服务器授信的令牌，进行随后的信息交互过程。 在超时、网络断开、其他设备上登录后，此前获得的令牌或丢失、或失效，对授权过程形成有效的安全防护。


